<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>main3</title>
</head>
<style>
  .blind {overflow: hidden; position: absolute; width: 1px; height: 1px; font-size: 12px; clip: rect(1px, 1px, 1px, 1px);}
  .container {max-width: 620px; margin: 0 auto;}
  .container a {text-decoration: none; color: inherit;}
  .container a:focus {outline: 1px dashed #999;}

  .container .item-box .item-img {display: flex; margin-top: 20px;}
  .container .item-box .item-img a {display: block; width: 300px; border: 1px solid #1eb9b2;}
  .container .item-box .item-img a:nth-child(2n + 2) {margin-left: 20px;}
  .container .item-box .item-img a img {display: block; width: 100%;}

  .container .img-popup {position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); visibility: hidden; opacity: 0; transition: all 0.3s; z-index: 10000;}
  .container .img-popup.active {visibility: visible; opacity: 1;}
  .container .img-popup .popup-inner {position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 900px;}
  .container .img-popup .popup-inner > img {display: block; width: 100%; margin: 0 auto;}
  .container .img-popup .popup-inner .close-btn {display: flex; display: -webkit-flex; display: -ms-flexbox; position: absolute; top: -36px; left: 50%; transform: translateX(-50%); width: 70px; height: 70px; border-radius: 50%; background-color: #1eb9b2; justify-content: center; align-items: center; color: #fff; font-size: 30px;}
  .container .img-popup .popup-inner .close-btn::before {content: ''; display: inline-block; width: 26px; height: 26px; background: url("data:image/svg+xml,%3Csvg width='26' height='26' viewBox='0 0 26 26' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Crect width='26' height='26' fill='url(%23pattern0_17072_610)'/%3E%3Cdefs%3E%3Cpattern id='pattern0_17072_610' patternContentUnits='objectBoundingBox' width='1' height='1'%3E%3Cuse xlink:href='%23image0_17072_610' transform='scale(0.0384615)'/%3E%3C/pattern%3E%3Cimage id='image0_17072_610' width='26' height='26' xlink:href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkM2MUEwQ0M3RDdGNTExRUJBRkQwRUY2ODRGMkZGMjI0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkM2MUEwQ0M4RDdGNTExRUJBRkQwRUY2ODRGMkZGMjI0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzYxQTBDQzVEN0Y1MTFFQkFGRDBFRjY4NEYyRkYyMjQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzYxQTBDQzZEN0Y1MTFFQkFGRDBFRjY4NEYyRkYyMjQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6N8FjUAAAAZElEQVR42mL8DwQMEMDIQBsANp+JgU6AEeEhBmr7DMW8AfERtXyGVf+A+ohcn+FVPyh8RKzPiPL5oPIRLpeTFIeD0kcU5TO6+YiFAp8M3TgaPvlo+JR1w6c+Gj5thuHVrgMIMACGuT0FoH0ZBwAAAABJRU5ErkJggg=='/%3E%3C/defs%3E%3C/svg%3E%0A") no-repeat center; transition: all 0.3s;
  }
  .container .img-popup .popup-inner .close-btn:hover::before {transform: rotate(180deg);}

  .img-layer-wrap .img-layer-inner .close-btn:hover::before, .img-layer-wrap .img-layer-inner .close-btn:focus::before {
    transform: rotate(180deg);
  }

  @media (max-width:991px) {
    .container .img-popup .popup-inner {width: 90%;}
    .container .img-popup .popup-inner .close-btn {width: 50px; height: 50px; top: -26px;}
    .container .img-popup .popup-inner .close-btn img {width: 20px;}
  }
</style>
<body>
<!-- 제이쿼리 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!-- XEIcon -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xeicon@2.3.3/xeicon.min.css">


<div class="container">
  <div class="img-popup">
    <div class="popup-inner">
      <img src="https://cdn.pixabay.com/photo/2020/05/06/10/34/puppy-5137100_1280.jpg" alt="이미지1">
      <a href="#" class="close-btn"><span class="blind">팝업창 닫기</span></a>
    </div>
  </div>

  <div class="item-box">
    <div class="item-img">
      <a href="#"><img src="https://cdn.pixabay.com/photo/2020/05/06/10/34/puppy-5137100_1280.jpg" alt="이미지1"></a>
      <a href="#"><img src="https://cdn.pixabay.com/photo/2017/07/25/12/57/dog-2537958_1280.jpg" alt="이미지2"></a>
    </div>
    <div class="item-img">
      <a href="#"><img src="https://cdn.pixabay.com/photo/2018/11/17/21/50/dog-3822092_1280.jpg" alt="이미지3"></a>
      <a href="#"><img src="https://cdn.pixabay.com/photo/2019/08/26/06/26/the-black-dog-4430887_1280.jpg" alt="이미지4"></a>
    </div>
    <div class="item-img">
      <a href="#"><img src="https://cdn.pixabay.com/photo/2019/10/28/04/21/puppy-4583450_1280.jpg" alt="이미지5"></a>
      <a href="#"><img src="https://cdn.pixabay.com/photo/2018/05/27/22/31/dog-3434802_1280.jpg" alt="이미지6"></a>
    </div>
    <div class="item-img">
      <a href="#"><img src="https://cdn.pixabay.com/photo/2018/02/11/13/02/cute-3145748_1280.jpg" alt="이미지7"></a>
      <a href="#"><img src="https://cdn.pixabay.com/photo/2021/01/25/01/35/flying-dog-5946987_1280.jpg" alt="이미지8"></a>
    </div>
    <div class="item-img">
      <a href="#"><img src="https://cdn.pixabay.com/photo/2018/09/24/09/53/spitz-3699479_1280.jpg" alt="이미지9"></a>
      <a href="#"><img src="https://cdn.pixabay.com/photo/2019/10/29/08/00/dog-4586318_1280.jpg" alt="이미지10"></a>
    </div>
  </div>
</div>

<script>
  $(function(){
    // 변수 선언
    var imageButton = $('.item-box .item-img a');
    var popup = $('.img-popup');
    var closeButton = popup.find('> .popup-inner > .close-btn');
    var htmlAndBody = $('html, body');
    var focusTarget;

    // 팝업 생성
    imageButton.on('click', function(e){
      e.preventDefault();
      var popupImg = popup.find('> .popup-inner > img');
      var image = $(this).find('> img');
      var src = image.attr('src');
      var alt = image.attr('alt');
      focusTarget = $(this);
      popupImg.attr('src', src).attr('alt', alt);
      createPopup();
    });

    // 팝업 제거
    popup.on('click', function(){
      removePopup();
    });
    closeButton.on('click', function(e){
      e.preventDefault();
      removePopup();
    });

    // 팝업창 검은배경과 닫기 버튼을 제외한 나머지 부분 클릭시 닫히지 않도록 하기
    popup.find('> .popup-inner').on('click', function(e){
      e.stopPropagation();
    })

    // 팝업 생성 함수
    function createPopup(){
      popup.addClass('active');
      htmlAndBody.css('overflow-y', 'hidden');
      setTimeout(function(){
        closeButton.focus();
      }, 50);
    }
    // 팝업 제거 함수
    function removePopup(){
      popup.removeClass('active');
      focusTarget.focus();
      htmlAndBody.css('overflow-y', 'visible');
    }
  })
</script>

</body>
</html>
